<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
        <!-- Slide meta data, remove/edit as you see fit -->
        <title>Unicode in Python</title>
        <meta name="generator" content="Organic" />
        <meta name="author" content="" />
        <meta name="company" content="" />
        <meta name="email" content="" />
        <meta name="date" content="2016-04-10" />
        <meta name="venue" content="The Internets" />
        <!-- Slippy core file and dependencies -->
        <script type="text/javascript" src="../slippy/src/jquery.min.js"></script>
        <script type="text/javascript" src="../slippy/src/jquery.history.js"></script>
        <script type="text/javascript" src="../slippy/src/slippy.js"></script>
        <!-- Slippy structural styles -->
        <link type="text/css" rel="stylesheet" href="../slippy/src/slippy.css"/>
        <!-- Slippy theme -->
        <link type="text/css" rel="stylesheet" href="../slippy/src/slippy-pure.css"/>
        <!-- Syntax highlighting core file  -->
        <script type="text/javascript" src="../slippy/src/highlighter/shCore.js"></script>
        <!-- Syntax highlighting brushes, remove those you don't need -->
        <script type="text/javascript" src="../slippy/src/highlighter/shBrushBash.js"></script>
        <script type="text/javascript" src="../slippy/src/highlighter/shBrushCpp.js"></script>
        <script type="text/javascript" src="../slippy/src/highlighter/shBrushCSharp.js"></script>
        <script type="text/javascript" src="../slippy/src/highlighter/shBrushCss.js"></script>
        <script type="text/javascript" src="../slippy/src/highlighter/shBrushDelphi.js"></script>
        <script type="text/javascript" src="../slippy/src/highlighter/shBrushDiff.js"></script>
        <script type="text/javascript" src="../slippy/src/highlighter/shBrushGroovy.js"></script>
        <script type="text/javascript" src="../slippy/src/highlighter/shBrushJava.js"></script>
        <script type="text/javascript" src="../slippy/src/highlighter/shBrushJScript.js"></script>
        <script type="text/javascript" src="../slippy/src/highlighter/shBrushPhp.js"></script>
        <script type="text/javascript" src="../slippy/src/highlighter/shBrushPlain.js"></script>
        <script type="text/javascript" src="../slippy/src/highlighter/shBrushPython.js"></script>
        <script type="text/javascript" src="../slippy/src/highlighter/shBrushRuby.js"></script>
        <script type="text/javascript" src="../slippy/src/highlighter/shBrushScala.js"></script>
        <script type="text/javascript" src="../slippy/src/highlighter/shBrushSql.js"></script>
        <script type="text/javascript" src="../slippy/src/highlighter/shBrushVb.js"></script>
        <script type="text/javascript" src="../slippy/src/highlighter/shBrushXml.js"></script>
        <!-- Syntax highlighting styles-->
        <link type="text/css" rel="stylesheet" href="../slippy/src/highlighter/shCore.css"/>
        <link type="text/css" rel="stylesheet" href="../slippy/src/highlighter/shThemeEclipse.css"/>
        <!-- Slippy init code -->
        <script type="text/javascript">
            $(function() {
                $(".slide").slippy({
                    // settings go here
                    // possible values are:
                    //  - animLen, duration for default animations (0 = disabled)
                    //  - animInForward, receives a slide and animates it
                    //  - animInRewind, receives a slide and animates it
                    //  - animOutForward, receives a slide and animates it
                    //  - animOutRewind, receives a slide and animates it
                    //  - baseWidth, defines the base for img resizing, if you don't want only
                    //    full-width images, specify this as the pixel width of a slide so that
                    //    images are scaled properly (default is 620px wide)
                    //  - ratio, defines the width/height ratio of the slides, defaults to 1.3 (620x476)
                    //  - margin, the fraction of screen to use as slide margin, defaults to 0.15
                });
                SyntaxHighlighter.all();
            });
        </script>
        <!-- Custom style for this deck -->
        <style type="text/css">
            .slide.nofooter {
                border: 0;
                background: 0;
            }
            .pic {
                 font-size: 400%;
                 font-family: Symbola, serif;
                 display: block;
                 padding-right: .2em;
                 padding-bottom: .1em;
                 clear: both;
                 float: left;
            }
        </style>
    </head>
    <body>
        <div class="slide title">
            <h1>UnicÃ¸dÎµ in â„™â‘‚thâ˜¯n</h1>
            <h1 class="center">è¬åœ‹å­—å…ƒåŠå…¶ç·¨ç¢¼</h1>
        </div>

        <div class="slide">
            <h1>Unicode and Encoding</h1>
            <ul>
                <li>Unicode: å­—å…ƒå’Œæ•¸å­—ä¹‹é–“çš„å°æ‡‰. æ¯”æ–¹èªª, "æ‚¨"é€™å€‹å­—åœ¨ Unicode ä¸­å’Œ 16 é€²ä½çš„ 60a8 ç›¸å°æ‡‰.</li>
                <li>Encoding: Unicodeåœ¨è¨˜æ†¶é«”è£¡çš„å„²å­˜æ–¹å¼.</li>
            </ul>
            <pre class="brush: plain">
            >>> s = u"æ‚¨å¥½ Qt"
            >>> s
            u'\u60a8\u597d Qt'
            >>> s.encode("utf-8")
            '\xe6\x82\xa8\xe5\xa5\xbd Qt'

            >>> s = u"\u9f9c"
            >>> print(s)
            é¾œ
            </pre>
        </div>

        <div class="slide">
            <h1>æ•¸å­— â¬Œ å­—å…ƒçš„å°æ‡‰</h1>
            <p>é›»è…¦åªèªè­˜0å’Œ1, å¦‚æ•¸å­—, å­—å…ƒç­‰ç­‰çš„æ¦‚å¿µè¦ç”± 0 å’Œ 1 çµ„åˆè€Œæˆ.</p>
            <pre class="brush: plain">
            >>> ord("a")
            97                  # æ•¸å­— 97 ä»£è¡¨å­—å…ƒ a.
            >>> "{0:b}".format(97)
            '1100001'
            </pre>
            <p> é›»è…¦çœ‹åˆ° 1100001 æ™‚, å¯ä»¥æŠŠå®ƒè§£è®€æˆåé€²ä½æ•¸å­— 97, ä¹Ÿå¯ä»¥è§£è®€æˆå°å¯«å­—æ¯a.</p>
        </div>

        <div class="slide">
            <h1>ç‚ºä»€éº¼è¦æœ‰unicode?</h1>
            <p>è‹¥(å­—å…ƒ, æ•¸å­—)å°æ‡‰æ–¹å¼ä¸çµ±ä¸€. é›»è…¦å°è³‡æ–™çš„è§£è®€æ–¹æ³•å°±æœƒä¸åŒ, å½¼æ­¤å°±ç„¡æ³•äº¤æ›è³‡æ–™.</p>
            <br>
            <p>æ—©æœŸåªå®šç¾©äº† ascii code (127å€‹å­—å…ƒ), ä¸å¤ ç”¨, æ•…æœ‰äº† unicode. </p>
            <br>
            <span class="pic">
                â˜ƒ ğŸ­ ğŸ® ğŸ± ğŸ˜¨ğŸ˜ğŸ˜±â›
            </span>
        </div>

        <div class="slide">
            <h1>Encoding(ç·¨ç¢¼) åˆæ˜¯ä»€éº¼?</h1>
            <br>
            <p>Encoding æ˜¯æ•¸å­—å¯¦éš›åœ¨é›»è…¦ä¸­çš„è¡¨é”æ–¹å¼. åƒæ˜¯è¦ç”¨å¹¾å€‹ byte è¡¨ç¤ºä¸€å€‹æ•¸å­—, ç”¨little endian å„²å­˜æˆ–æ˜¯ big endian å„²å­˜ç­‰.</p>
            <br>
            <p>æ¯”æ–¹èªª, 60a8 å’Œ 597d é€™å…©å€‹ 16 é€²ä½æ•¸å­—åœ¨è¨˜æ†¶é«”ä¸­å¯ä»¥å„²å­˜ç‚º</p>
            <pre class="brush: plain">
            60 a8 59 7d              # 2 bytes å­˜ä¸€å€‹æ•¸å­—
            00 00 60 a8 00 00 59 7d  # 4 bytes å­˜ä¸€å€‹æ•¸å­—, little endian
            a8 60 00 00 7d 59 00 00  # 4 bytes å­˜ä¸€å€‹æ•¸å­—, big endian
            </pre>
            <p>çŸ¥é“Encodingçš„æ–¹å¼ç‚ºä½•, æ‰èƒ½æ­£ç¢ºè§£è®€é€™äº›è³‡æ–™.</p>
        </div>

        <div class="slide">
            <h1>Unicode and UTF-8</h1>
            <p>unicode æ˜¯é‚è¼¯ä¸Šçš„æ•¸å­—â¬Œå­—å…ƒçš„å°æ‡‰é—œä¿‚, æ­¤å°æ‡‰é—œä¿‚æ˜¯æ˜¯å”¯ä¸€çš„, ä½†å®ƒå¯ä»¥æœ‰è¨±å¤šä¸åŒçš„ç·¨ç¢¼æ–¹å¼.</p>
            <p>æœ€å¸¸è¦‹çš„ unicode encoding æ˜¯ UTF-8.</p>
            <pre class="brush: plain">
            >>> s = u"æ‚¨å¥½ Qt"
            >>> s.encode("utf-8")
            '\xe6\x82\xa8\xe5\xa5\xbd Qt'
            >>> s.encode("big5")
            '\xb1z\xa6n Qt'
            >>> s.encode("utf-16")
            '\xff\xfe\xa8`}Y \x00Q\x00t\x00'
            </pre>
        </div>

        <div class="slide">
            <h1>ä½¿ç”¨UTF-8çš„å„ªé»</h1>
            <ul>
            <li>ä¸ä½”ç”¨å¤šé¤˜çš„è¨˜æ†¶é«”ç©ºé–“</li>
            <li>UTF-8 ç·¨ç¢¼éçš„ byte sequence ä¸­é–“ä¸æœƒå‡ºç¾0, æ•… C çš„ strlen() ç­‰å‡½å¼ä»å¯æ­£ç¢ºåˆ¤æ–·å­—ä¸²çš„çµæŸä¹‹è™•.</li>
            <li>å’Œ ascii code ç›¸å®¹</li>
            <li>ä½¿ç”¨äººæ•¸çœ¾å¤š</li>
            </ul>
        </div>

        <div class="slide">
            <h1>Python 2.x çš„å¯¦åš</h1>
            <ul>
                <li>str: byte sequence</li>
                <li>unicode: code point(unicode) sequence</li>
            </ul>
            <pre class="brush: plain">
            >>> s1 = "Hello Qt"     # str object
            >>> type(s1)
            &lt;type 'str'&gt;
            >>> s2 = u"Hello Qt"    # unicode object
            >>> type(s2)
            &lt;type 'unicode'&gt;
            </pre>
        </div>

        <div class="slide">
            <h1>.encode() å’Œ .decode()</h1>
            <ul>
                <li>.encode(): unicode â†’  byte</li>
                <li>.decode(): byte â†’  unicode</li>
            </ul>
            <pre class="brush: plain">
            >>> u = u"æ‚¨å¥½ Qt"
            >>> len(u)
            5
            >>> utf8 = u.encode("utf-8")
            >>> len(utf8)
            9
            >>> utf8
            '\xe6\x82\xa8\xe5\xa5\xbd Qt'
            >>> utf8.decode("utf-8")
            u'\u60a8\u597d Qt'
            </pre>
        </div>

        <div class="slide">
            <h1>ç”Ÿæ´»æ˜¯å¦‚æ­¤ç¾å¥½, ç›´åˆ°...</h1>
            <pre class="brush: plain">
            >>> apple = "\xe8\x98\x8b\xe6\x9e\x9c"
            >>> u"Good to eat %s" % (apple)           # æ··ç”¨ str å’Œ unicode
            Traceback (most recent call last):
              File "&lt;stdin&gt;", line 1, in &lt;module&gt;
              UnicodeDecodeError: 'ascii' codec can't decode byte 0xe8 in position 0: ordinal not in range(128)
            >>> "Good to eat %s" % (apple)
            'Good to eat \xe8\x98\x8b\xe6\x9e\x9c'
            >>> print("Good to eat %s" % (apple))
            Good to eat è˜‹æœ
            </pre>
        </div>

        <div class="slide">
            <h1>ç”¨replaceæ”¾å¤§çµ•æ‹›</h1>
            <pre class="brush: plain">
            >>> u = u"æ‚¨å¥½Qt"
            >>> utf8 = u.encode("utf-8")
            >>> utf8.decode("ascii")
            Traceback (most recent call last):
              File "&lt;stdin&gt;", line 1, in &lt;module&gt;
              UnicodeDecodeError: 'ascii' codec can't decode byte 0xe6 in position 0: ordinal not in range(128)
            >>> utf8.decode("ascii", "replace")
            u'\ufffd\ufffd\ufffd\ufffd\ufffd\ufffdQt'
            >>> print(utf8.decode("ascii", "replace"))
            ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Qt
            </pre>
        </div>

        <div class="slide">
            <h1>IO Rediction æ™‚æ‰æœƒå‡ºå•é¡Œ ğŸ˜±</h1>
            <pre class="brush: plain">
            $ python split.py > output
            Traceback (most recent call last):
              File "split.py", line 6, in <module>
                  print item
            UnicodeEncodeError: 'ascii' codec can't encode characters in position 0-1: ordinal not in range(128)
            </pre>
            <h1>ä½¿ç”¨PYTHONIOENCODINGç’°å¢ƒè®Šæ•¸è§£æ±º ğŸ˜Š </h1>
            <pre class="brush: plain">
            $ PYTHONIOENCODING=utf-8 python split.py > output
            $
            </pre>
        </div>

        <div class="slide">
            <h1>æŸ¥çœ‹æ˜¯stré‚„æ˜¯unicode</h1>
            <ul>
                <li> print(type(your_var))</li>
                <li> isinsance(your_var, unicode) </li>
            <ul>
        </div>

        <div class="slide">
            <h1>typeæ˜¯str, ä½†å…§å®¹å»æ˜¯utf8çš„ç·¨ç¢¼</h1>
            <p>å‡ºç¾æ­¤æƒ…æ³çš„å¯èƒ½åŸå› :</p>
            <ul>
                <li>ä½¿ç”¨os.list(/path/to/), ä¸”ç³»çµ±çš„encodingæ˜¯utf8</li>
                <li>è³‡æ–™å¾ç¶²è·¯ä¸Šè€Œä¾†</li>
            <ul>
            <pre class="brush: plain">
            >>> s = "\xe8\x87\xba\xe7\x81\xa3"
            >>> print s
            è‡ºç£
            >>> type(s)
            &lt;type 'str'&gt;
            >>> s = s.decode("utf-8")           # ç”¨decode() è®Šæˆ unicode
            >>> type(s)
            &lt;type 'unicode'&gt;
            >>> print s
            è‡ºç£
            </pre>
        <div class="slide">


        <div class="slide">
            <h1>ç•¶è³‡æ–™æ˜¯å¾å¤–éƒ¨ä¾†çš„æ™‚å€™...é ä¾†æºå‘Šè¨´ä½ encodingç‚ºä½•, æˆ–è€…è‡ªå·±çŒœæ¸¬</h1>
            <pre class="brush: plain">
                <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

                <?xml version="1.0" encoding="UTF-8" ?>

                # -*- coding: iso8859-1 -*-
            </pre>
        </div>

        <div class="slide">
            <h1>Tips</h1>
            <ul>
                <li>çŸ¥é“ç›®å‰è™•ç†çš„è³‡æ–™æ˜¯ str é‚„æ˜¯ unicode</li>
                <li>å¯«æ¸¬è©¦ç¨‹å¼</li>
            </ul>
        </div>

        <div class="layout" data-name="default">
            <content></content>
            <div class="footer">
                <span class="center">chihungtzeng AT gmail.com</span>
                <hr class="defloat" />
            </div>
        </div>

        <div class="layout nofooter" data-name="alt">
            <content></content>
        </div>
    </body>
</html>
